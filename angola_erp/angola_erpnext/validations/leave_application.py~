# -*- coding: utf-8 -*-
from __future__ import unicode_literals
import frappe
from frappe.model.naming import make_autoname

def autoname(doc,method):

	print(doc.name)
	print(len(doc.naming_series))
	print(make_autoname(doc.naming_series))
#	print(make_autoname(self.serie_tipo)[0:13])
#	self.numero_de_processo = self.numero_de_processo + make_autoname(self.serie_tipo)[0:13] # 'FO/' + '.YYYY./.#####')
	doc.name = make_autoname(doc.naming_series)


def validate(doc,method):
	#Check if there is any attendance for an employee
	att = frappe.db.sql("""SELECT name FROM `tabAttendance` 
		WHERE docstatus = 1 AND employee = '%s' AND att_date >= '%s' AND
		att_date <= '%s'"""%(doc.employee, doc.from_date, doc.to_date), as_list=1)
	if att:
		frappe.throw(("Employee: {0} already has attendance between {1} and {2}").format(doc.employee_name, doc.from_date, doc.to_date))
